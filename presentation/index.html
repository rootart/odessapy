<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<title>Odessa.py #0</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=1274, user-scalable=no">
	<link rel="stylesheet" href="themes/ribbon/styles/style.css">
	<!--
		To apply styles to the certain slides
		use slide ID to get needed elements
		-->
	<style>
		#Cover h2 {
			color:#FFF;
			text-align:center;
			font-size:70px;
			}
		#FitToWidth h2,
		#FitToHeight h2 {
			color:#FFF;
			text-align:center;
			}
	</style>
</head>
<body class="list">
	<header class="caption">
		<h1>Odessa.py#0 SaltStack</h1>
		<p>Vasyl Dizhak</p>
	</header>

	<div class="slide cover" id="OdessaPyImg"><div>
		<section>
			<header>
			 <h2 style="color: #000; padding-top: 30%; font-size: 0.8em;">SaltStack - Vasyl Dizhak</h2>
			</header>
			<img src="i/OdessaPy_for presentation.jpg" alt="">
		</section>
	</div></div>

	<div class="slide cover" id="Cover"><div>
		<section>
			<header>
			</header>
			<img src="i/saltstack-logo.jpg" alt="">
		</section>
	</div></div>

	<div class="slide shout" id="PresentationLink"><div>
		<section>
			<header><h2><a href="http://bit.ly/saltstack">bit.ly/saltstack</a></h2></header>
		</section>
	</div></div>

	<div class="slide" id="WhatIsSalt"><div>
		<section>
			<header>
				<h2>SaltStack</h2>
			</header>
			<p>
				<backquote>
					SaltStack takes a new approach to infrastructure management by developing software that is easy enough to get running in seconds, scalable enough to manage tens of thousands of servers, and fast enough to control and communicate with them in milliseconds. 
				</backquote>
				<a href="https://github.com/saltstack/salt">https://github.com/saltstack/salt</a>
			</p>
		</section>
	</div></div>



	<div class="slide" id="Why"><div>
		<section>
			<header>
				<h2>Why Salt?</h2>
			</header>
			<p>
				<backquote>
					It provides fantastic and flexiable way for both <mark>remote execution</mark> (psh, ansiable) and <mark>configuration management</mark> (chef, puppet)
				</backquote>
				<pre>
					<code>salt  <mark>'*'</mark> <mark>cmd.run</mark> '/etc/init.d/redis-server restart'
					</code>
				</pre>
			</p>
		</section>
	</div></div>


	<div class="slide" id="FamiliarStack"><div>
		<section>
			<header>
				<h2>Familiar technology stack</h2>
			</header>
			<p>
			<ul>
				<li>Built with <mark>python</mark></li>
				<li>Server/client architecture using <mark>ZMQ</mark> messaging system with <mark>msgpack</mark> serialization.</li>
				<li>Simple <mark>YAML</mark> configuration with <mark>Jinja</mark> templating support</li>
				<li>Highly extendiable (write own renderes, returners, modules etc)</li>
			</ul>
			</p>
		</section>
	</div></div>


	<div class="slide" id="Concepts"><div>
		<section>
		<header>Concepts</header>
		<ul>
			<li><mark>master</mark> - central control bus that connects with minions and them connect to the master</li>
			<li><mark>minion</mark> - server that is controlled by master, however could work with master less configuration</li>
			<li><mark>grains</mark> - static information about minion (cpus, memory, arch etc)</li>
			<li><mark>pillars</mark> - variables that could be send to specific minion</li>
			<li><mark>state</mark> - declarative representation of minions configuration</li>
		</ul>
		</section>
	</div></div>

	<div class="slide" id="Installation"><div>
		<section>
			<header>
				<h2>Installation</h2>
			</header>
			<p>
        <pre>
          <code>wget -O - <mark>http://bootstrap.saltstack.org</mark> | sudo sh</code>
          							or
          <code>add-apt-repository <mark>ppa:saltstack/salt</mark> -y </code>
          <code>aptitude install <mark>salt-master</mark> <mark>salt-minion</mark></code>
        </pre>
			</p>
		</section>
	</div></div>


	<div class="slide" id="MinionConfiguration"><div>
		<section>
			<header>
				<h2>Minion configuration</h2>
			</header>
			<p>
        <pre>
          <code><mark>master:</mark> 162.243.100.158 #/etc/salt/minion</code>
          <code><mark>salt-key -a</mark> {key} # accept minion key on master</code>
          <code>root@salt-stack-master:/srv/salt# <mark>salt-key -L</mark>
Accepted Keys:
s1
Unaccepted Keys:
Rejected Keys:          
          </code>
        </pre>
			</p>
		</section>
	</div></div>



	<div class="slide cover" id="PingCommand"><div>
		<section>
			<header>
			</header>
			<img src="i/2._root_salt-stack-master_____ssh_.png" alt="">
		</section>
	</div></div>
	

	<div class="slide cover" id="KeysList"><div>
		<section>
			<header>
			</header>
			<img src="i/2._root_salt-stack-master_____ssh_ 2.png" alt="">
		</section>
	</div></div>

		<div id="Grains" class="slide shout"><div>
		<section>
			<header>
				<h2>Grains</h2>
				<h3>static bits of information that minion collects on the first start</h3>
			</header>
		</section>
	</div></div>

	<div class="slide cover" id="GrainsItems"><div>
		<section>
			<header>
			</header>
			<img src="i/2._root_salt-stack-master_____ssh_ 3.png" alt="">
		</section>
	</div></div>

	<div class="slide cover" id="GrainsItemIPv4"><div>
		<section>
			<header>
			</header>
			<img src="i/2._root_salt-stack-master_____ssh_ 4.png" alt="">
		</section>
	</div></div>

    <div class="slide cover" id="GrainsItemTargeting"><div>
		<section>
			<header>
			</header>
			<img src="i/2._root_salt-stack-master_____ssh_ 5.png" alt="">
		</section>
	</div></div>


	<div class="slide" id="CustomGrains"><div>
		<section>
			<header>
				<h2>Custom grains</h2>
			</header>
			<p>
        <pre>
<code> /etc/salt/minion
<mark>grains</mark>:
  roles:
    - redis-cluster
    - mongodb
          </code>
<code>salt '*' grains.item <mark>roles</mark></code>
        </pre>
			</p>
		</section>
	</div></div>


	<div id="Targeting" class="slide shout"><div>
		<section>
			<header>
				<h2>Targeting</h2>
			</header>
		</section>
	</div></div>


<div class="slide" id="TargetingTypes"><div>
		<section>
		<header>
			<h2>Targeting types</h2>
		</header>
			<p>
       <ul>
       	<li><mark>"*"</mark> glob means all minions</li>
       	<li><mark>-L </mark> lists by minion id (s1, s2)</li>
       	<li><mark>-G </mark>Grains</li>
       	<li><mark>-E</mark> PCRE Minion ID (E@web\d+\.(dev|qa|prod)\.loc)</li>
       	<li><mark>-P </mark> PCRE Grains (P@os:(RedHat|Fedora|CentOS))</li>
   		<li><mark>-I </mark> Pillar glob (I@pdata:foobar)</li>
   		<li><mark>-C </mark> Compound using <mark>not</mark>, <mark>and</mark>, <mark>or</mark> operators</li>
       </ul>
			</p>
		</section>
	</div></div>


<div class="slide" id="TargetingTypesExamples"><div>
		<section>
		<header>
			<h2>Targeting types (examples)</h2>
		</header>
			<p>
       <pre>
       	<code>salt -G <mark>'roles:mongodb'</mark> test.ping</code>
       	<code>salt -C <mark>'G@roles:redis-cluster or s3'</mark> test.ping</code>
   		<code>salt -C <mark>'G@roles:redis-cluster</mark> or <mark>s3</mark>' test.ping</code>
       	<code>salt -C '<mark>G@roles:redis-cluster</mark> and <mark>G@os:Ubuntu</mark>' command</code>
       </pre>
			</p>
		</section>
	</div></div>

    <div class="slide cover" id="TargetingExamplesScreenshot"><div>
		<section>
			<header>
			</header>
			<img src="i/2._root_salt-stack-master_____ssh_ 6.png" alt="">
		</section>
	</div></div>

	<div id="Modules" class="slide shout"><div>
		<section>
			<header>
				<h2>Modules</h2>
			</header>
		</section>
	</div></div>

<div class="slide" id="ModulesDescription"><div>
		<section>
		<header>
			<h2>Python functions that could be executed on minions</h2>
		</header>
			<p>
      		<a href="http://docs.saltstack.com/py-modindex.html">http://docs.saltstack.com/py-modindex.html</a>
      		<pre>
      			<code>salt 's1' <mark>pkg.refresh_db</mark></code>
      			<code>salt '*' <mark>service.restart</mark> chat</code>
      			<code>salt '*' <mark>grains.ls</mark></code>
      			<code>salt '*' <mark>rabbitmq.add_user</mark> user password</code>
      			<code>salt '*' <mark>cmd.run</mark>'/etc/init.d/celeryd restart' <mark>-b</mark> 1</code>
      		</pre>
			</p>
		</section>
	</div></div>

<div class="slide" id="WriteCustomModule"><div>
		<section>
		<header>
			<h2>Or write your own module</h2>
		</header>
			<p>
			<a href="http://docs.saltstack.com/ref/modules/">http://docs.saltstack.com/ref/modules/</a>
      		<h1 style="font-size: 1.5em;">/salt/srv/_modules/*</h1>
      		* will be synced with minions during next <mark>saltutil.sync_modules</mark> or <mark>state.highstate</mark>
			</p>
		</section>
	</div></div>

<div class="slide cover" id="CustomModule"><div>
	<section>
		<header>
		</header>
		<img src="i/2._root_salt-stack-master_____ssh_ 7.png" alt="">
	</section>
</div></div>

	<div id="Pillars" class="slide shout"><div>
		<section>
			<header>
				<h2>Pillars</h2>
			</header>
		</section>
	</div></div>

	<div id="States" class="slide shout"><div>
		<section>
			<header>
				<h2>States</h2>
			</header>
		</section>
	</div></div>


	<div class="slide" id="ThankYou"><div>
		<section>
			<header>
				<h2>Thank you</h2>
			</header>
			Vasyl Dizhak <a href="http://twitter.com/rootart">@rootart</a>, <a href="http://dizhak.com">dizhak.com</a><br>
			<a href="mailto:vasyl.dizhak@djangostars.com">vasyl.dizhak@djangostars.com</a><br>
			<em style="font-size: 40px;">Questions?</em>
		</section>
	</div></div>

	<div class="progress"><div></div></div>
	<script src="scripts/script.js"></script>
</body>
</html>